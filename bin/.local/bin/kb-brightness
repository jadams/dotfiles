#!/bin/bash
kbdb='/sys/devices/platform/applesmc768/leds/smc::kbd_backlight/brightness'
xob_file=/var/run/kb_xob
step=25
current=`cat $kbdb`
new=$current
if [ "$1" == "up" ];then
   new=$(($current + $step))
elif [ "$1" == "down" ];then 
   new=$(($current - $step))
fi
if [ $new -le 0 ];then
   new=0
fi
echo $new > $kbdb
current=`cat $kbdb`
echo $current > $xob_file
